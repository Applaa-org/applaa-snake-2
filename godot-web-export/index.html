<!DOCTYPE html>
<html>
<head>
    <title>Centipede-inspired Arcade</title>
    <meta charset="UTF-8">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap'); /* Optional: for pixel font */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* Retro dark blue/green gradient */
            background: linear-gradient(135deg, #001f3f 0%, #003366 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #00ff00; /* Bright green for UI text */
        }
        #gameContainer {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent dark background */
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 255, 0, 0.2); /* Green glow shadow */
        }
        #gameCanvas {
            /* Nokia 3310 screen colors: high contrast green/monochrome/blue */
            border: 2px solid #008000; /* Darker green border */
            border-radius: 8px;
            background: #000000; /* Black canvas for high contrast */
            box-shadow: 0 4px 20px rgba(0, 255, 0, 0.3); /* Green glow */
            display: block;
            margin: 20px auto;
        }
        h1 {
            color: #00ff00; /* Bright green */
            margin-bottom: 10px;
            font-size: 28px;
            font-family: 'Press Start 2P', monospace; /* Pixel font */
            text-shadow: 2px 2px 0 #008000;
        }
        .info {
            color: #008000; /* Darker green */
            font-size: 14px;
            margin-bottom: 20px;
        }
        .controls {
            margin-top: 15px;
            color: #00ff00; /* Bright green */
            font-size: 13px;
            font-family: 'Press Start 2P', monospace;
            text-shadow: 1px 1px 0 #008000;
        }
        .score {
            color: #00ff00; /* Bright green */
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
            font-family: 'Press Start 2P', monospace; /* Pixel font */
            text-shadow: 2px 2px 0 #008000; /* Pixelated effect */
            letter-spacing: 2px;
        }
        #status {
            margin-top: 10px;
            color: #00ff00; /* Bright green */
            font-size: 12px;
            font-family: 'Press Start 2P', monospace;
            text-shadow: 1px 1px 0 #008000;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <h1>ðŸ‘¾ Centipede Arcade</h1>
        <div class="info">Applaa Game Preview - Top-Down Shooter</div>
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div class="score">Score: <span id="score">0</span></div>
        <div class="controls">
            Use ARROW KEYS or WASD to move | SPACE to shoot
        </div>
        <div id="status" style="margin-top: 10px; color: #00ff00; font-size: 12px;">Game loaded successfully!</div>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const statusElement = document.getElementById('status');
        
        // Game state
        let score = 0;
        const canvasWidth = 800;
        const canvasHeight = 600;
        let gameOver = false;
        
        // Player
        let player = {
            x: canvasWidth / 2,
            y: canvasHeight - 50,
            size: 20, // Size for the triangle
            speed: 5,
            color: '#00ff00', // Bright green
            shootingCooldown: 15, // frames
            currentCooldown: 0
        };
        
        // Bullets
        let bullets = [];
        const bulletSpeed = 10;
        const bulletRadius = 3;
        const bulletColor = '#ffff00'; // Bright yellow
        
        // Worm
        let wormSegments = [];
        const segmentSize = 20;
        const initialWormSpeed = 2;
        let wormSpeed = initialWormSpeed;
        let wormDirection = 1; // 1 for right, -1 for left
        const wormDropDistance = 30;
        const wormColor = '#ff0000'; // Bright red
        
        // Input handling
        let keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.key.toLowerCase()] = true;
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.key.toLowerCase()] = false;
        });
        
        // Game initialization
        function createWorm() {
            wormSegments = [];
            const numSegments = 10;
            const startX = canvasWidth / 2 - (numSegments * segmentSize) / 2;
            const startY = 50;
            for (let i = 0; i < numSegments; i++) {
                wormSegments.push({
                    x: startX + i * segmentSize,
                    y: startY,
                    size: segmentSize,
                    color: wormColor,
                    id: i // Unique ID for each segment
                });
            }
            wormSpeed = initialWormSpeed; // Reset speed
            wormDirection = 1; // Reset direction
        }

        function resetGame() {
            score = 0;
            scoreElement.textContent = score;
            bullets = [];
            createWorm();
            player.x = canvasWidth / 2;
            player.y = canvasHeight - 50;
            player.currentCooldown = 0;
            gameOver = false;
            statusElement.textContent = "Game loaded successfully!";
        }
        
        function updatePlayer() {
            if (gameOver) return;

            if (keys['arrowleft'] || keys['a']) {
                player.x -= player.speed;
            }
            if (keys['arrowright'] || keys['d']) {
                player.x += player.speed;
            }
            if (keys['arrowup'] || keys['w']) {
                player.y -= player.speed;
            }
            if (keys['arrowdown'] || keys['s']) {
                player.y += player.speed;
            }
        
            // Keep player within bounds
            player.x = Math.max(player.size / 2, Math.min(canvasWidth - player.size / 2, player.x));
            player.y = Math.max(canvasHeight / 2, Math.min(canvasHeight - player.size / 2, player.y)); // Player restricted to bottom half
        
            // Shooting
            if (keys[' '] && player.currentCooldown <= 0) {
                bullets.push({
                    x: player.x,
                    y: player.y - player.size / 2, // Shoot from top of triangle
                    radius: bulletRadius,
                    color: bulletColor,
                    speed: bulletSpeed
                });
                player.currentCooldown = player.shootingCooldown;
            }
            if (player.currentCooldown > 0) {
                player.currentCooldown--;
            }
        }
        
        function updateBullets() {
            if (gameOver) return;

            for (let i = bullets.length - 1; i >= 0; i--) {
                let bullet = bullets[i];
                bullet.y -= bullet.speed;
        
                // Remove if off-screen
                if (bullet.y < 0) {
                    bullets.splice(i, 1);
                    continue;
                }
        
                // Check collision with worm segments
                for (let j = wormSegments.length - 1; j >= 0; j--) {
                    let segment = wormSegments[j];
                    const dist = Math.sqrt(Math.pow(bullet.x - segment.x, 2) + Math.pow(bullet.y - segment.y, 2));
                    if (dist < bullet.radius + segment.size / 2) {
                        // Collision!
                        score += 10; // Score for hitting a segment
                        scoreElement.textContent = score;
                        wormSegments.splice(j, 1); // Remove segment
                        bullets.splice(i, 1); // Remove bullet
                        break; // Bullet can only hit one segment
                    }
                }
            }
        }
        
        function updateWorm() {
            if (gameOver) return;

            let hitWall = false;
            for (let segment of wormSegments) {
                segment.x += wormSpeed * wormDirection;
        
                // Check if any segment hits a wall
                if (segment.x + segment.size / 2 > canvasWidth || segment.x - segment.size / 2 < 0) {
                    hitWall = true;
                }
            }
        
            if (hitWall) {
                wormDirection *= -1; // Reverse direction
                for (let segment of wormSegments) {
                    segment.y += wormDropDistance; // Move down
                }
            }
        
            // Check for game over condition (worm reaches player area)
            for (let segment of wormSegments) {
                const playerRect = {
                    x: player.x - player.size / 2,
                    y: player.y - player.size / 2,
                    width: player.size,
                    height: player.size
                };
                const segmentRect = {
                    x: segment.x - segment.size / 2,
                    y: segment.y - segment.size / 2,
                    width: segment.size,
                    height: segment.size
                };

                if (checkRectCollision(playerRect, segmentRect)) {
                    gameOver = true;
                    statusElement.textContent = "GAME OVER! Press R to Restart";
                    break;
                }
            }
        
            // If all segments are destroyed, create a new worm and increase difficulty
            if (wormSegments.length === 0) {
                createWorm();
                wormSpeed += 0.5; // Increase speed for next worm
            }
        }

        function checkRectCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }
        
        function render() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight); // Clear canvas
            ctx.fillStyle = '#000000'; // Canvas background
            ctx.fillRect(0, 0, canvasWidth, canvasHeight);
        
            // Draw player (triangle)
            ctx.fillStyle = player.color;
            ctx.beginPath();
            ctx.moveTo(player.x, player.y - player.size / 2); // Top point
            ctx.lineTo(player.x - player.size / 2, player.y + player.size / 2); // Bottom-left
            ctx.lineTo(player.x + player.size / 2, player.y + player.size / 2); // Bottom-right
            ctx.closePath();
            ctx.fill();
            ctx.strokeStyle = '#008000'; // Darker green border
            ctx.lineWidth = 1;
            ctx.stroke();
        
            // Draw bullets
            bullets.forEach(bullet => {
                ctx.fillStyle = bullet.color;
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, bullet.radius, 0, Math.PI * 2);
                ctx.fill();
            });
        
            // Draw worm segments
            wormSegments.forEach(segment => {
                ctx.fillStyle = segment.color;
                ctx.beginPath();
                ctx.arc(segment.x, segment.y, segment.size / 2, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#008000'; // Darker green border
                ctx.lineWidth = 1;
                ctx.stroke();
            });
        }
        
        function gameLoop() {
            if (!gameOver) {
                updatePlayer();
                updateBullets();
                updateWorm();
            } else {
                // Allow restart on 'R' key press
                if (keys['r']) {
                    resetGame();
                }
            }
            render();
            requestAnimationFrame(gameLoop);
        }
        
        createWorm(); // Initialize the worm
        gameLoop();
    
        
        console.log('ðŸ‘¾ Applaa game preview loaded successfully! Type: top-down arcade shooter');
    </script>
</body>
</html>